"use strict";(self.webpackChunkadmin_dashboard_template_dashwind=self.webpackChunkadmin_dashboard_template_dashwind||[]).push([[416],{3886:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(3851),n=a(579);const r=function(e){let{title:t,children:a,topMargin:r,TopSideButtons:l}=e;return(0,n.jsxs)("div",{className:"card w-full p-3 md:p-6 bg-base-100 shadow-xl "+(r||"mt-4"),children:[(0,n.jsxs)(s.A,{styleClass:l?"inline-block":"",children:[t,l&&(0,n.jsx)("div",{className:"inline-block float-right",children:l})]}),(0,n.jsx)("div",{className:"divider mt-2"}),(0,n.jsx)("div",{className:"h-full w-full pb-4 bg-base-100",children:a})]})}},3851:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(579);const n=function(e){let{styleClass:t,children:a}=e;return(0,s.jsx)("div",{className:"text-xl font-semibold ".concat(t),children:a})}},8416:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s=a(8310),n=a(5043),r=a(9456),l=a(8379),c=a(2019),i=a(5513),o=a(3886),d=a(3393),p=a(1972),m=a(8970),u=a(4117),y=a(4978),h=a(2809),f=a(579);const w=()=>{const e=(0,r.wA)(),{t:t}=(0,u.Bd)(),a=(0,d.useStripe)(),n=(0,d.useElements)();return(0,f.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),m.hm.warning(y.Ay.t("payment_is_processing"),y.Ay.t("warning")),!a||!n)return;const{error:r,paymentIntent:l}=await a.confirmPayment({elements:n,redirect:"if_required"});r?m.hm.error(r.message,y.Ay.t("error")):(console.log(l.status),"succeeded"==l.status&&s.A.put("/profile",{paid:!0},(()=>{s.A.get("/login",(t=>{e((0,h.iD)(t.user)),m.hm.success(y.Ay.t("payment_success"),y.Ay.t("success"))}))})))},children:[(0,f.jsxs)("p",{className:"text-xl my-2 text-center",children:["$",Number("10000")/100]}),(0,f.jsx)(d.PaymentElement,{}),(0,f.jsx)("div",{className:"flex justify-center mt-8",children:(0,f.jsx)("button",{className:"btn btn-primary",disabled:!a,children:t("payment")})})]})};var x=a(7154);const j=()=>{const e=(0,n.useRef)();return(0,n.useEffect)((()=>{(async()=>{try{const t=await x.A.get("/payment/paypal/client-id");(e=>new Promise(((t,a)=>{if(window.paypal)return void t(window.paypal);const s=document.createElement("script");s.src="https://www.paypal.com/sdk/js?client-id=".concat(e),s.onload=()=>t(window.paypal),s.onerror=a,document.body.appendChild(s)})))(t.data.clientId).then((t=>{t.Buttons({createOrder:async(e,t)=>(await x.A.post("/payment/paypal/create-order")).data.id,onApprove:async(e,t)=>{const a=await x.A.post("/payment/paypal/capture-order",{orderID:e.orderID});alert("Transaction completed by "+a.data.payer.name.given_name)},onError:e=>{console.error("PayPal Checkout onError",e)}}).render(e.current)})).catch((e=>{console.error("Failed to load PayPal script",e)}))}catch(t){console.error("Failed to fetch PayPal client ID",t)}})()}),[]),(0,f.jsx)("div",{ref:e})},b=(0,p.c)("pk_test_51NnacALwUcVk9eB5S9la7yylhGWheK8OBqq0JXH0asDanZMCFabjwjjMCChLlcJ9rcFUc51D80IK8X98pVGhenMf00ujmYorAy"),A=()=>{const e=(0,r.wA)();(0,n.useEffect)((()=>{e((0,l.wE)({title:"payment"}))}),[]);const{user:t}=(0,r.d4)((e=>e.user)),[a,p]=(0,n.useState)(null);(0,n.useEffect)((()=>{s.A.post("/payment/stripe",{amount:"10000"},(e=>{p(e.client_secret)}))}),[]);localStorage.getItem("lang");const m=localStorage.getItem("theme"),[u,y]=(0,n.useState)("Stripe"),h={items:[{label:"Stripe",key:"Stripe"},{label:"PayPal",key:"PayPal"}],onClick:e=>{c.Ay.info("Selected ".concat(e.key)),y(e.key)}};return(0,f.jsx)("div",{className:"flex justify-center",children:(0,f.jsxs)("div",{className:"w-[640px]",children:[(0,f.jsx)(i.A.Button,{className:"w-full",menu:h,children:u}),"Stripe"===u?(0,f.jsx)(o.A,{title:"Stripe",children:a&&(0,f.jsx)(d.Elements,{stripe:b,options:{clientSecret:a,locale:"en",appearance:{theme:"dark"==m?"night":"stripe"}},children:(0,f.jsx)(w,{})})}):(0,f.jsx)(o.A,{title:"Paypal",children:(0,f.jsx)(j,{})})]})})}}}]);
//# sourceMappingURL=416.9d986e1b.chunk.js.map